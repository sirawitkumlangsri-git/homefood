{"file":"_id_-b_z6q1Ln.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AA6CA,UAAM,SAAS,UAAW;AAC1B,UAAM,QAAQ,SAAU;AACxB,UAAM,UAAU,IAAI,IAAI;AAExB,UAAM,OAAO,IAAI;AAAA,MACf,OAAO;AAAA,MACP,MAAM;AAAA,MACN,UAAU;AAAA,MACV,aAAa;AAAA,IACf,CAAC;AAiCD,UAAM,aAAa,YAAY;AAC7B,YAAM,KAAK,MAAM,OAAO;AACxB,UAAI;AACF,cAAM,WAAW,MAAM,MAAM,mBAAmB,EAAE,IAAI;AAAA,UACpD,QAAQ;AAAA,UACR,SAAS;AAAA,YACP,gBAAgB;AAAA,UACjB;AAAA,UACD,MAAM,KAAK,UAAU,KAAK,KAAK;AAAA,QACrC,CAAK;AACD,YAAI,CAAC,SAAS,IAAI;AAChB,gBAAM,IAAI,MAAM,uBAAuB;AAAA,QAC7C;AACI,eAAO,KAAK,cAAc;AAAA,MAC3B,SAAQ,OAAO;AACd,gBAAQ,MAAM,wBAAwB,KAAK;AAAA,MAC/C;AAAA,IACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","names":[],"sources":["../../../../pages/admin/users/edit/[id].vue"],"sourcesContent":["<template>\n  <adminLayouts>\n    <div v-if=\"loading\" class=\"text-center\">Loading...</div>\n    <div v-else class=\"flex justify-center p-4\">\n      <form @submit.prevent=\"submitForm\" class=\"w-full\">\n        <label class=\"form-control w-full mt-3\">\n          <div class=\"label\">\n            <span class=\"label-text\">ชื่อ</span>\n          </div>\n          <input type=\"text\" v-model=\"form.fullname\" class=\"input input-bordered w-full\" required />\n        </label>\n\n        <label class=\"form-control w-full mt-3\">\n          <div class=\"label\">\n            <span class=\"label-text\">อีเมล</span>\n          </div>\n          <input type=\"email\" v-model=\"form.email\" class=\"input input-bordered w-full\" required />\n        </label>\n\n        <label class=\"form-control w-full\">\n          <div class=\"label\">\n            <span class=\"label-text\">role</span>\n          </div>\n          <select class=\"select select-bordered\" v-model=\"form.role\">\n            <option value=\"user\">User</option>\n            <option value=\"admin\">Admin</option>\n            <option value=\"cashier\">Cashier</option>\n          </select>\n        </label>\n\n        <div class=\"flex sm:justify-end justify-center gap-5\">\n          <RouterLink to=\"/admin/users\" class=\"btn btn-accent font-light my-5 text-white sm:w-60 w-36\">\n            ย้อนกลับ\n          </RouterLink>\n          <div>\n            <button type=\"submit\" class=\"btn btn-accent my-5 text-white font-light sm:w-60 w-36\">ยืนยันการแก้ไข</button>\n          </div>\n        </div>\n      </form>\n    </div>\n  </adminLayouts>\n</template>\n\n<script setup>\nimport adminLayouts from '~/layouts/adminLayouts.vue'\nconst router = useRouter();\nconst route = useRoute();\nconst loading = ref(true);\n\nconst form = ref({\n  email: '',\n  role: '',\n  fullname: '',\n  phoneNumber: ''\n});\n\nconst fetchUser = async (id) => {\n  try {\n    const response = await fetch(`/api/admin/user/${id}`, {\n      method: 'GET',\n    });\n    if (!response.ok) {\n      throw new Error(`แสดงข้อมูลผู้ใช้ไม่สำเร็จ status : ${response.status}`);\n    }\n    const userData = await response.json();\n    form.value = {\n      email: userData.email,\n      role: userData.role,\n      fullname: userData.fullname,\n      phoneNumber: userData.phoneNumber,\n    };\n  } catch (error) {\n    console.error('แสดงข้อมูลผู้ใช้ไม่สำเร็จ:', error);\n  } finally {\n    loading.value = false;\n  }\n};\n\nonMounted(async () => {\n  const id = route.params.id;\n  console.log('Route ID:', id);\n  if (id) {\n    await fetchUser(id);\n  }\n  console.log('form : ' , form.value)\n});\n\nconst submitForm = async () => {\n  const id = route.params.id;\n  try {\n    const response = await fetch(`/api/admin/user/${id}`, {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(form.value),\n    });\n    if (!response.ok) {\n      throw new Error('Failed to update user');\n    }\n    router.push('/admin/users');\n  } catch (error) {\n    console.error('Error updating user:', error);\n  }\n};\n</script>\n\n<style>\n\n</style>"],"version":3}